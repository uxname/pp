# üöÄ Project Charter: Kodu

**–î–∞—Ç–∞:** 24.01.2026
**–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞:** CLI Utility / Developer Tooling
**–†–∞–±–æ—á–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:** Kodu

## 1. –†–µ–∑—é–º–µ –ø—Ä–æ–µ–∫—Ç–∞ (Executive Summary)
**Kodu** ‚Äî —ç—Ç–æ –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ (CLI), –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å –±–æ–ª—å—à–∏–º–∏ —è–∑—ã–∫–æ–≤—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ (LLM).
–£—Ç–∏–ª–∏—Ç–∞ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ä—É—á–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞), –æ—á–∏—Å—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –æ—Ç –º—É—Å–æ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä—É—Ç–∏–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Ä–µ–≤—å—é, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤) —Å –ø–æ–º–æ—â—å—é AI.
**–ö–ª—é—á–µ–≤–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è:** –í—ã—Å–æ–∫–∏–π Developer Experience (DX), —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## 2. –¶–µ–ª–∏ –∏ –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
1.  **–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å AI:** –°–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–¥–æ–º —Å 2‚Äì5 –º–∏–Ω—É—Ç –¥–æ 5 —Å–µ–∫—É–Ω–¥.
2.  **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –≤ AI —Ç–æ–ª—å–∫–æ —á–∏—Å—Ç–æ–≥–æ, –ø–æ–ª–µ–∑–Ω–æ–≥–æ –∫–æ–¥–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –Ω–æ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤–∞–∂–Ω–æ–π —Å–µ–º–∞–Ω—Ç–∏–∫–∏.
3.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –ë–µ—Å—à–æ–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤ –ø–∞–π–ø–ª–∞–π–Ω–∞—Ö (CI/CD, Git Hooks).
4.  **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –≥–æ—Ç–æ–≤–∞—è –∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤ –∏ –∫–æ–º–∞–Ω–¥.

## 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ (Technology Stack)
–ú—ã –≤—ã–±–∏—Ä–∞–µ–º —Å—Ç–µ–∫, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—é.

*   **Runtime:** Node.js
*   **Framework:** NestJS + **Nest Commander** (–º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å, DI, —É–¥–æ–±—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∏).
*   **AI Orchestration:** **Mastra** (–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ LLM, –∞–≥–µ–Ω—Ç—ã).
*   **Validation:** **Zod** (–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
*   **Code Analysis (AST):** **ts-morph** (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è TypeScript/JSX/TSX).
*   **Token Counting:** **js-tiktoken** (—Ç–æ—á–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤ OpenAI).
*   **Utils:** `globby` (—Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞), `inquirer` (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤), `chalk`/`ora` (UI).

## 4. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (Scope)

### 4.1. Core: Initialization & Config
*   **–ö–æ–º–∞–Ω–¥–∞:** `kodu init`
*   –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–∞ `kodu.json`.
*   –°–æ–∑–¥–∞–Ω–∏–µ `.kodu/` –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤.
*   –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Zod –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.

### 4.2. The Packer (–°–±–æ—Ä—â–∏–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
*   **–ö–æ–º–∞–Ω–¥–∞:** `kodu pack [options]`
*   –°–±–æ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –æ–¥–∏–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –∏–ª–∏ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞ (`--copy`).
*   –£—á–µ—Ç `.gitignore` –∏ `ignorePatterns` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `packer.useGitignore`).
*   **Token Budgeting:** –í—Å–µ–≥–¥–∞ –≤—ã–≤–æ–¥–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ø—Ä–∏–º–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å.
*   **Prompt Templates:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–ª–∞–≥–∞ `--template <name>`, –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ –∏–∑ `.kodu/prompts/`.
*   *–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:* –û—Ç–∫–∞–∑ –æ—Ç "Smart Context" (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–æ–≤) —Ä–∞–¥–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏.

### 4.3. The Cleaner (–û—á–∏—Å—Ç–∫–∞ –∫–æ–¥–∞)
*   **–ö–æ–º–∞–Ω–¥–∞:** `kodu clean`
*   –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏–∑ –∫–æ–¥–∞.
*   **–ê–ª–≥–æ—Ä–∏—Ç–º:** –°—Ç—Ä–æ–≥–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (–±–µ–∑ AI), –Ω–∞ –±–∞–∑–µ AST (`ts-morph`).
*   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞:** `.ts`, `.js`, `.tsx`, `.jsx`.
*   –£—á–µ—Ç `.gitignore` –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ `cleaner.useGitignore`.
*   **Whitelist (–ò—Å–∫–ª—é—á–µ–Ω–∏—è):**
    *   *System:* `@ts-ignore`, `eslint-disable`, `prettier-ignore`, `TODO`, `FIXME`.
    *   *Biome:* –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `// biome-ignore ...`.
    *   *User:* –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Å–ø–∏—Å–æ–∫ –≤ `kodu.json` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `//!`).

### 4.4. AI Features (Mastra Integration)
*   **–ö–æ–º–∞–Ω–¥–∞:** `kodu review`
    *   –ê–Ω–∞–ª–∏–∑ `git diff` —á–µ—Ä–µ–∑ AI —Å —Ä–µ–∂–∏–º–∞–º–∏ Security, Style, Bug hunting.
    *   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CI/CD: `--ci` –æ—Ç–∫–ª—é—á–∞–µ—Ç —Å–ø–∏–Ω–Ω–µ—Ä—ã/–±—É—Ñ–µ—Ä, `--output` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç text.
*   **–ö–æ–º–∞–Ω–¥–∞:** `kodu commit`
    *   –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ–º–º–∏—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `staged` –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å –º–µ—Ç–æ–¥–∏–∫–æ–π Conventional Commits.
    *   –í—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `stdout`, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `--output` –∏ `--ci`, —Å–∞–º–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `git commit`.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç AI
*   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–ª—é—á: `export OPENAI_API_KEY=<–∫–ª—é—á>` (–∏–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `llm.apiKeyEnv`).
*   –†–µ–≤—å—é: `kodu review --mode bug|style|security [--ci] [--output review.txt]`.
*   –ö–æ–º–º–∏—Ç: `kodu commit [--ci] [--output commit-message.txt]` (–ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ).
*   –í git diff –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –∏–∑ `packer.ignore` (–Ω–∞–ø—Ä–∏–º–µ—Ä, lock-—Ñ–∞–π–ª—ã –∏ `dist/`).

## 5. –ì—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–µ–∫—Ç–∞ (Out of Scope for MVP)
*   –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤, –æ—Ç–ª–∏—á–Ω—ã—Ö –æ—Ç JS/TS (–¥–ª—è –∫–æ–º–∞–Ω–¥—ã `clean`). `pack` –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ –≤—Å–µ–º —Ç–µ–∫—Å—Ç–æ–º.
*   AI-based —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (—Å–ª–∏—à–∫–æ–º —Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ).
*   –û–±—Ñ—É—Å–∫–∞—Ü–∏—è –∫–æ–¥–∞ (—Å–µ–∫—Ä–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ `.env`).
*   GUI –≤–µ—Ä—Å–∏—è.

## 6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`kodu.json`)
–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –∫ –∫–æ—Ç–æ—Ä–æ–π –º—ã —Å—Ç—Ä–µ–º–∏–º—Å—è:
```json
{
  "$schema": "./node_modules/kodu/schema.json",
  "llm": {
    "provider": "openai",
    "model": "gpt-4o"
  },
  "cleaner": {
    "whitelist": ["//!"],
    "useGitignore": true
  },
  "packer": {
    "ignore": ["*.lock", "coverage"],
    "useGitignore": true
  }
}
```
